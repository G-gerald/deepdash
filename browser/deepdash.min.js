var deepdash=function(){"use strict";function e(e){return function(r,t,n){if(!e[r])if(e.mixin){var a={};a[r]=t,e.mixin(a,{chain:n})}else e[r]=t;return e}}function r(e){return function(e){for(var r=[],t=0;t<e.length;t++)t in e||r.push(t);for(var n=r.length;n--;)e.splice(r[n],1);return e}}var t=/\D/,n=/^[a-zA-Z_$]+([\w_$]*)$/,a=/"/g;function i(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return e.reduce((function(e,r){return e?!r||r.startsWith("[")?""+e+r:e+"."+r:r}),"")}function o(e){return function(r){for(var o=[],c=arguments.length-1;c-- >0;)o[c]=arguments[c+1];return o=o.filter((function(e){return void 0!==e})),e.isString(r)?i.apply(void 0,o.concat([r])):Array.isArray(r)?(o=i.apply(void 0,o),r.reduce((function(e,r){var i=typeof r;return"number"===i?r<0||r%1!=0?e+'["'+r+'"]':e+"["+r+"]":"string"!==i?e+'["'+r+'"]':r?t.test(r)?n.test(r)?e?e+"."+r:""+e+r:e+'["'+r.replace(a,'\\"')+'"]':e+"["+r+"]":e+'[""]'}),o)):void 0}}o.notChainable=!0;var c=/^[a-zA-Z_$]+([\w_$]*)$/,l=/"/g;var h=function(e,r,t){this.obj=e,this._options=r,this.break=t},u={path:{configurable:!0},parent:{configurable:!0},parents:{configurable:!0},depth:{configurable:!0},isLeaf:{configurable:!0},isCircular:{configurable:!0},circularParentIndex:{configurable:!0},circularParent:{configurable:!0},childrenPath:{configurable:!0}};function s(e){var r=function(e){var r=o(e);return function(n){var a=n.options,i=n.obj,o=n.callback;a.pathFormatArray="array"==a.pathFormat,n.depth=0;for(var c=!1,l=new h(i,a,(function(){return c=!0,!1}));n&&!c;){if(!n.inited){n.inited=!0;var u=e.isObject(n.value),s=e.isEmpty(n.value);if(a.checkCircular&&(n.circularParentIndex=-1,n.circularParent=null,n.isCircular=!1,u&&!s))for(var p=n.parent;p;){if(p.value===n.value){n.isCircular=!0,n.circularParent=p,n.circularParentIndex=n.depth-p.depth-1;break}p=p.parent}if(n.children=[],a.childrenPath&&a.childrenPath.forEach((function(r,t){var i=e.get(n.value,r);e.isEmpty(i)||n.children.push([r,a.strChildrenPath[t],i])})),n.isLeaf=n.isCircular||void 0!==a.childrenPath&&!n.children.length||!u||s,n.needCallback=(n.depth||a.includeRoot)&&(!a.leavesOnly||n.isLeaf),n.needCallback){l.setItem(n,!1);try{n.res=o(n.value,n.key,n.parent&&n.parent.value,l)}catch(e){throw e.message&&(e.message+="\ncallback failed before deep iterate at:\n"+r(n.path)),e}}if(c)break;!1!==n.res&&(c||n.isCircular||!u||(void 0===a.childrenPath||!n.depth&&a.rootIsChildren?n.childrenItems=t(n,n.value,a,[],""):(n.childrenItems=[],n.children.length&&n.children.forEach((function(r){var i=r[0],o=r[1],c=r[2];e.isObject(c)&&(n.childrenItems=n.childrenItems.concat(t(n,c,a,i,o)))}))))),n.currentChildIndex=-1}if(n.childrenItems&&n.currentChildIndex<n.childrenItems.length-1)n.currentChildIndex++,n.childrenItems[n.currentChildIndex].parentItem=n,n=n.childrenItems[n.currentChildIndex];else{if(n.needCallback&&a.callbackAfterIterate){l.setItem(n,!0);try{o(n.value,n.key,n.parent&&n.parent.value,l)}catch(e){throw e.message&&(e.message+="\ncallback failed after deep iterate at:\n"+r(n.path)),e}}n=n.parentItem}}};function t(e,r,t,n,a){var i,o;return t.pathFormatArray||(i=e.strPath||"",a&&i&&!a.startsWith("[")&&(i+="."),i+=a||"",o=Array.isArray(r)),Object.entries(r).map((function(r){var h,u=r[0],s=r[1];return t.pathFormatArray||(h=o?i+"["+u+"]":c.test(u)?i?i+"."+u:""+u:i+'["'+u.replace(l,'\\"')+'"]'),{value:s,key:u,path:(e.path||[]).concat(n,[u]),strPath:h,depth:e.depth+1,parent:{value:e.value,key:e.key,path:t.pathFormatArray?e.path:e.strPath,parent:e.parent,depth:e.depth},childrenPath:n.length&&n||void 0,strChildrenPath:a||void 0}}))}}(e);return function(t,n,a){if(void 0===n&&(n=e.identity),void 0!==(a=e.merge({includeRoot:!Array.isArray(t),pathFormat:"string",checkCircular:!1,leavesOnly:!1},a||{})).childrenPath){if(a.includeRoot||void 0!==a.rootIsChildren||(a.rootIsChildren=Array.isArray(t)),!e.isString(a.childrenPath)&&!Array.isArray(a.childrenPath))throw Error("childrenPath can be string or array");e.isString(a.childrenPath)&&(a.childrenPath=[a.childrenPath]),a.strChildrenPath=a.childrenPath,a.childrenPath=[];for(var i=a.strChildrenPath.length-1;i>=0;i--)a.childrenPath[i]=e.toPath(a.strChildrenPath[i])}return r({value:t,callback:n,options:a,obj:t}),t}}function p(e){var r=s(e),t=function(e){for(var r=[],t=0;t<e.length;t++)t in e||r.push(t);for(var n=r.length;n--;)e.splice(r[n],1);return e},n=e.each||e.forArray;return function(a,i){var o={checkCircular:(i=e.merge({checkCircular:!1},i||{})).checkCircular},c=[];return r(a,(function(e,r,t,n){!n.isCircular&&Array.isArray(e)&&c.push(e)}),o),Array.isArray(a)&&c.push(a),n(c,t),a}}function d(e){return function(r,t){var n=(t=Array.isArray(t)?e.clone(t):e.toPath(t)).pop(),a=t.length?e.get(r,t):r;return void 0!==a&&n in a}}function f(e){var r=s(e),t=o(e),n=p(e),a=d(e);return function(i,o,c){o=e.iteratee(o),c?void 0!==(c=e.cloneDeep(c)).leafsOnly&&(c.leavesOnly=c.leafsOnly):c={},c.onTrue||(c.onTrue={}),c.onFalse||(c.onFalse={}),c.onUndefined||(c.onUndefined={}),void 0!==c.childrenPath&&(void 0===c.onTrue.skipChildren&&(c.onTrue.skipChildren=!1),void 0===c.onUndefined.skipChildren&&(c.onUndefined.skipChildren=!1),void 0===c.onFalse.skipChildren&&(c.onFalse.skipChildren=!1),void 0===c.onTrue.cloneDeep&&(c.onTrue.cloneDeep=!0),void 0===c.onUndefined.cloneDeep&&(c.onUndefined.cloneDeep=!0),void 0===c.onFalse.cloneDeep&&(c.onFalse.cloneDeep=!0));var l,h={pathFormat:(c=e.merge({checkCircular:!1,keepCircular:!0,leavesOnly:void 0===c.childrenPath,condense:!0,cloneDeep:e.cloneDeep,pathFormat:"string",onTrue:{skipChildren:!0,cloneDeep:!0,keepIfEmpty:!0},onUndefined:{skipChildren:!1,cloneDeep:!1,keepIfEmpty:!1},onFalse:{skipChildren:!0,cloneDeep:!1,keepIfEmpty:!1}},c)).pathFormat,checkCircular:c.checkCircular,childrenPath:c.childrenPath,includeRoot:c.includeRoot,rootIsChildren:c.rootIsChildren,callbackAfterIterate:!0,leavesOnly:!1},u=Array.isArray(i)?[]:e.isObject(i)?{}:null,s={},p=[];return r(i,(function(r,n,a,i){var h=t(i.path);if(!i.afterIterate){if(i.isCircular)return e.unset(u,i.path),c.keepCircular&&p.push([i.path,i.circularParent.path]),!1;var d=!c.leavesOnly||i.isLeaf?o(r,n,a,i):void 0;return e.isObject(d)||(d=void 0===d?e.clone(c.onUndefined):d?e.clone(c.onTrue):e.clone(c.onFalse)),void 0===d.empty&&(d.empty=!0),void 0!==h?(s[h]=d,l||(l={skipChildren:!1,cloneDeep:!1,keepIfEmpty:!1,empty:d.empty})):l=d,!d.keepIfEmpty&&d.skipChildren||(c.cloneDeep&&d.cloneDeep?void 0!==i.path?e.set(u,i.path,c.cloneDeep(r)):u=c.cloneDeep(r):void 0!==i.path?e.set(u,i.path,Array.isArray(r)?[]:e.isPlainObject(r)?{}:r):u=Array.isArray(r)?[]:e.isPlainObject(r)?{}:r),!d.skipChildren}!i.afterIterate||i.isCircular||(void 0===h&&l.empty&&!l.keepIfEmpty?u=null:void 0!==h&&s[h].empty&&!s[h].keepIfEmpty?e.unset(u,i.path):(e.eachRight(i.parents,(function(e){var r=t(e.path);if(void 0===r||!s[r].empty)return!1;s[r].empty=!1})),l.empty=!1))}),h),l&&l.empty&&!l.keepIfEmpty&&(u=null),e.each(p,(function(r){var t;(void 0===r[1]||a(u,r[1]))&&(t=e.has(c,"replaceCircularBy")?c.replaceCircularBy:void 0!==r[1]?e.get(u,r[1]):u,e.set(u,r[0],t))})),c.condense&&(u=n(u,{checkCircular:c.checkCircular})),!Array.isArray(u)||u.length||h.includeRoot?u:null}}function v(e){var r=s(e);return function(t,n,a){n=e.iteratee(n),a?void 0!==(a=e.cloneDeep(a)).leafsOnly&&(a.leavesOnly=a.leafsOnly):a={};var i,o={pathFormat:(a=e.merge({checkCircular:!1,leavesOnly:void 0===a.childrenPath,pathFormat:"string"},a)).pathFormat,checkCircular:a.checkCircular,childrenPath:a.childrenPath,includeRoot:a.includeRoot,rootIsChildren:a.rootIsChildren,callbackAfterIterate:!1,leavesOnly:a.leavesOnly};return r(t,(function(e,r,t,a){if(n(e,r,t,a))return i={value:e,key:r,parent:t,context:a},a.break()}),o),i}}function y(e){var r=v(e);return function(e,t,n){var a=r(e,t,n);return a&&a.context.path}}function C(e){var r=v(e);return function(e,t,n){var a=r(e,t,n);return a&&a.value}}function m(e){return s(e)}function g(e){var r=s(e);return function(t,n){(n=e.merge({checkCircular:!1,includeCircularPath:!0,leavesOnly:!n||void 0===n.childrenPath},n||{}))&&void 0!==n.leafsOnly&&(n.leavesOnly=n.leafsOnly);var a={pathFormat:"string",checkCircular:n.checkCircular,includeRoot:n.includeRoot,childrenPath:n.childrenPath,rootIsChildren:n.rootIsChildren,leavesOnly:n.leavesOnly},i={};return r(t,(function(e,r,t,a){a.isCircular&&!n.includeCircularPath||void 0!==a.path&&(i[a.path]=e)}),a),i}}function P(e){var r=s(e);return function(t,n){n&&void 0!==n.leafsOnly&&(n.leavesOnly=n.leafsOnly);var a={pathFormat:(n=e.merge({checkCircular:!1,includeCircularPath:!0,leavesOnly:!n||void 0===n.childrenPath,pathFormat:"string"},n||{})).pathFormat,checkCircular:n.checkCircular,includeRoot:n.includeRoot,childrenPath:n.childrenPath,rootIsChildren:n.rootIsChildren,leavesOnly:n.leavesOnly},i=[];return r(t,(function(e,r,t,a){a.isCircular&&!n.includeCircularPath||void 0!==a.path&&i.push(a.path)}),a),i}}function k(e){return P(e)}function b(e){var r=s(e);return function(e,t,n,a){var i=void 0!==n;return r(e,(function(e,r,a,o){i?n=t(n,e,r,a,o):(n=e,i=!0)}),a),n}}function I(e){var r=b(e);return function(t,n,a){return n=e.iteratee(n),r(t,(function(e,r,t,a,i){return e.push(n(r,t,a,i)),e}),[],a)}}function A(e){var r=s(e),t=o(e);return function(n,a,i){void 0===i&&(i={}),a=e.iteratee(a),i.cloneDeep=i.cloneDeep||e.cloneDeep,i.callbackAfterIterate=!1;var o=[];r(n,(function(e,r,n,c){if(void 0!==r){var l=a(e,r,n,c)+"";if(l!==r){var h=c.path,u="array"===i.pathFormat?JSON.stringify(h):h,s="array"===i.pathFormat?(c.parent.path||[]).concat(c.childrenPath||[],[l]):t([l],c.parent.path,c.childrenPath),p="array"===i.pathFormat?JSON.stringify(s):s;o[c.depth-1]||(o[c.depth-1]=[]),o[c.depth-1].push({oldPath:h,oldPathStr:u,newPath:s,newPathStr:p})}}}),i);for(var c=i.cloneDeep(n),l=o.length,h=function(){if(o[l]){var r={};o[l].forEach((function(t){var n,a=t.oldPath,i=t.oldPathStr,o=t.newPath,l=t.newPathStr;if(Object.prototype.hasOwnProperty.call(r,i))n=r[i],delete r[i];else{if(void 0===(n=e.get(c,a))&&!e.has(c,a))return;e.unset(c,a)}e.has(c,o)&&!Object.prototype.hasOwnProperty.call(r,l)&&(r[l]=e.get(c,o)),e.set(c,o,n)}))}};l--;)h();return c}}function O(e){var r=s(e);return function(t,n,a){n=e.iteratee(n);var i,o=Array.isArray(t)?[]:e.isObject(t)?{}:e.clone(t);return r(t,(function(r,t,a,c){c.skipChildren||(c.skipChildren=function(e){i=e}),i=void 0;var l=n(r,t,a,c);if(c.isLeaf||void 0!==i||(i=r!==l&&Array.isArray(r)!=Array.isArray(l)),void 0!==c.path?e.set(o,c.path,l):o=l,i)return!1}),a),o}}function D(e){var r=o(e);return function(t,n){var a,i;e.isString(t)?a=t:i=t,n=Array.isArray(n)?e.cloneDeep(n):[n];for(var o=0;o<n.length;o++)if(e.isString(n[o])&&(n[o]=e.toPath(n[o])),Array.isArray(n[o])){if(void 0===i&&(i=e.toPath(a)),i.length>=n[o].length&&e.isEqual(e.takeRight(i,n[o].length),n[o]))return n[o]}else{if(!(n[o]instanceof RegExp))throw new Error("To match path use only string/regex or array of them.");if(void 0===a&&(a=r(t)),n[o].test(a))return n[o]}return!1}}function F(e){var r=D(e),t=f(e);return function(n,a,i){var o=!(i=e.merge({invert:!1},i||{})).invert;return(i=e.merge({onMatch:{cloneDeep:!1,skipChildren:!1,keepIfEmpty:!o},onNotMatch:{cloneDeep:!1,skipChildren:!1,keepIfEmpty:o}},i)).leavesOnly=!1,i.childrenPath=void 0,i.includeRoot=void 0,i.pathFormat="array",i.onTrue=i.invert?i.onMatch:i.onNotMatch,i.onFalse=i.invert?i.onNotMatch:i.onMatch,t(n,(function(e,t,n,o){return!1!==r(o.path,a)?i.invert:!i.invert}),i)}}function _(e){var r=F(e);return function(t,n,a){return(a=e.merge({invert:!1},a||{})).invert=!0,r(t,n,a)}}function E(e){var r=v(e);return function(e,t,n){return!!r(e,t,n)}}return h.prototype.setItem=function(e,r){this._item=e,this.afterIterate=r},u.path.get=function(){return this._options.pathFormatArray?this._item.path:this._item.strPath},u.parent.get=function(){return this._item.parent},u.parents.get=function(){if(!this._item._parents){this._item._parents=[];for(var e=this._item.parent;e;)this._item._parents[e.depth]=e,e=e.parent}return this._item._parents},u.depth.get=function(){return this._item.depth},u.isLeaf.get=function(){return this._item.isLeaf},u.isCircular.get=function(){return this._item.isCircular},u.circularParentIndex.get=function(){return this._item.circularParentIndex},u.circularParent.get=function(){return this._item.circularParent},u.childrenPath.get=function(){return void 0!==this._options.childrenPath&&(this._options.pathFormatArray?this._item.childrenPath:this._item.strChildrenPath)||void 0},Object.defineProperties(h.prototype,u),d.notChainable=!0,D.notChainable=!0,function(t){return function(t){e(t)("condense",(function(e){for(var r=[],t=0;t<e.length;t++)t in e||r.push(t);for(var n=r.length;n--;)e.splice(r[n],1);return e}),!r.notChainable)}(t),function(r){e(r)("condenseDeep",p(r),!p.notChainable)}(t),function(r){e(r)("eachDeep",s(r),!s.notChainable)}(t),function(r){e(r)("exists",d(r),!d.notChainable)}(t),function(r){e(r)("filterDeep",f(r),!f.notChainable)}(t),function(r){e(r)("findDeep",v(r),!v.notChainable)}(t),function(r){e(r)("findPathDeep",y(r),!y.notChainable)}(t),function(r){e(r)("findValueDeep",C(r),!C.notChainable)}(t),function(r){e(r)("forEachDeep",m(r),!m.notChainable)}(t),function(r){e(r)("index",g(r),!g.notChainable)}(t),function(r){e(r)("keysDeep",k(r),!k.notChainable)}(t),function(r){e(r)("mapDeep",I(r),!I.notChainable)}(t),function(r){e(r)("mapKeysDeep",A(r),!A.notChainable)}(t),function(r){e(r)("mapValuesDeep",O(r),!O.notChainable)}(t),function(r){e(r)("omitDeep",F(r),!F.notChainable)}(t),function(r){e(r)("pathMatches",D(r),!D.notChainable)}(t),function(r){e(r)("pathToString",o(r),!o.notChainable)}(t),function(r){e(r)("paths",P(r),!P.notChainable)}(t),function(r){e(r)("pickDeep",_(r),!_.notChainable)}(t),function(r){e(r)("reduceDeep",b(r),!b.notChainable)}(t),function(r){e(r)("someDeep",E(r),!E.notChainable)}(t),t}}();
//# sourceMappingURL=deepdash.min.js.map
